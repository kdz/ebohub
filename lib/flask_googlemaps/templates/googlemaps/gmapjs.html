<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyB8MGX_RPHx-KYyxlOupzPf9cPKh0Ewres" type="text/javascript"></script>

<style type="text/css">
      #{{gmap.identifier}} { {{gmap.style}} }
</style>

<script type="text/javascript">
    function initialize_{{gmap.varname}}() {
        var {{gmap.varname}} = new google.maps.Map(
        document.getElementById('{{gmap.identifier}}'), {
            center: new google.maps.LatLng({{gmap.center.0}}, {{gmap.center.1}}),
            zoom: {{gmap.zoom}},
            mapTypeId: google.maps.MapTypeId.{{gmap.maptype}}
        });

        {% for marker in gmap.markers %}
            var icon = {
                url: "{{marker.icon}}",
                scaledSize: new google.maps.Size(25,30) /*,
                origin: new google.maps.Point(0,0),
                anchor: new google.maps.Point(0, 0) */
            };

            var marker_{{loop.counter}} = new google.maps.Marker({
                position: new google.maps.LatLng({{marker.lat}}, {{marker.lng}}),
                map: {{gmap.varname}},
                icon: icon
            });
        {% endfor %}

    }
    google.maps.event.addDomListener(window, 'load', initialize_{{gmap.varname}});
</script>